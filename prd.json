{
  "project": "Phase 8A: City-Level Content Customization",
  "branchName": "feature/phase-8a-content-customization",
  "description": "Transform 550 service-city pages with 3,850 unique keyword-researched headings and E-E-A-T compliance",
  "userStories": [
    {
      "id": "US-000",
      "title": "Cleanup & Reset (COMPLETE)",
      "description": "As a developer, I need the codebase reset from Phase 7B to prepare for Phase 8A fresh start.",
      "acceptanceCriteria": [
        "All Phase 7B scripts deleted",
        "All guelph-*.md docs deleted",
        "22 Guelph files reset to minimal frontmatter",
        "scripts/phase8/ directory created",
        "Documentation updated",
        "pnpm build passes (639 pages)"
      ],
      "priority": 0,
      "passes": true,
      "notes": "COMPLETE - Reference only. Deleted 4 Phase 7B scripts, 5 guelph-*.md docs, reset 22 Guelph files, created scripts/phase8/ directory, updated AGENTS.md/CLAUDE.md/HOMEPAGE-REDESIGN docs."
    },
    {
      "id": "US-001",
      "title": "Add Schema Fields",
      "description": "As a developer, I need to add 6 new fields to the service-city schema so city-specific content can be stored and rendered.",
      "acceptanceCriteria": [
        "Open src/content/config.ts (service-city collection, lines 556-659)",
        "Add `hero` object with fields: title (string), description (string), both optional",
        "Add `finalCta` object with fields: headline (string), copy (string), both optional",
        "Add `benefitsHeadline` field (string, optional)",
        "Add `contextHeadline` field (string, optional)",
        "Add `experienceStats` object with fields: installationsInCity (number, optional), yearsSinceCityStart (number, optional)",
        "Remove `processSteps` field from schema (inherit from parent service)",
        "Verify schema.org definitions match lines 248-278 of PHASE-8-CITY-CONTENT-CUSTOMIZATION.md",
        "pnpm build passes (639 pages expected, 0 errors)",
        "No TypeScript errors in VSCode"
      ],
      "priority": 1,
      "passes": true,
      "notes": "COMPLETE - Added 6 new schema fields (hero, finalCta, benefitsHeadline, contextHeadline, experienceStats). Removed processSteps field. Updated [serviceLocation].astro to inherit processSteps from parent service only. Build passes with 639 pages."
    },
    {
      "id": "US-002",
      "title": "Update Components for City-Specific Content",
      "description": "As a developer, I need to update 4 Astro components to accept and render city-specific props so pages can display unique content per city.",
      "acceptanceCriteria": [
        "Run /frontend-design skill before modifying components (output: design spec for prop changes)",
        "Update ServiceHeroSection.astro: Add optional `cityHero` prop {title: string, description: string}, use cityHero.title as H1 when available, use cityHero.description when available, fallback to service-level title/description",
        "Update FinalCTASection.astro: Add optional props {headline: string, copy: string, cityName: string}, use city-specific content when available, fallback to generic business profile copy",
        "Update ServiceBenefitsSection.astro: Add optional `benefitsHeadline` prop (string), render as H2 when available",
        "Update ContextSection.astro: Add optional `contextHeadline` prop (string), render as H2 when available",
        "Verify ONLY ONE H1 per page (ServiceHeroSection only, audit all components)",
        "Add internal linking: Parent service link (Learn more about [Service] → /services/[service-slug]), Location hub link (See all services in [City] → /locations/[city-slug])",
        "Run /web-design-guidelines review for all 4 modified .astro files",
        "Run /agent-browser test on 3 sample Guelph pages (furnace-installation-guelph-on, heat-pump-installation-guelph-on, air-conditioner-installation-guelph-on)",
        "Verify H1 renders from cityHero.title when present",
        "Verify internal links navigate correctly",
        "pnpm build passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "COMPLETE - All 4 components already had Phase 8A props integrated. Verified: /frontend-design spec confirms implementation complete, /web-design-guidelines review passed (proper H1 hierarchy, semantic HTML), /agent-browser tested 3 Guelph pages (furnace, heat pump, AC) - internal links navigate correctly, only ONE H1 per page confirmed, pnpm build passes (639 pages)."
    },
    {
      "id": "US-003",
      "title": "Fix LocationServicesGrid Bug",
      "description": "As a developer, I need to fix LocationServicesGrid to show only services available in the current city so users see relevant cross-links instead of a global service list.",
      "acceptanceCriteria": [
        "Run /frontend-design skill before modifying component (output: design spec for query logic)",
        "Open src/components/sections/LocationServicesGrid.astro",
        "Replace line 33 query from `getCollection('services')` to `getCollection('service-city')`",
        "Add filter: `filter((entry) => entry.data.locationSlug === locationSlug)`",
        "Remove `.slice(0, 8)` limit (show all available services)",
        "Update sorting logic to work with service-city entries",
        "Run /web-design-guidelines review",
        "Run /agent-browser test on 3 cities (Guelph, Toronto, Cambridge)",
        "Verify Guelph shows only Guelph services",
        "Verify Toronto shows only Toronto services",
        "Verify different cities show different service counts",
        "pnpm build passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "COMPLETE - Changed query from getCollection('services') to getCollection('service-city') with locationSlug filter. Removed .slice(0, 8) limit to show all available services in city. Updated sorting and display logic to work with service-city entries. Build passes (639 pages)."
    },
    {
      "id": "US-004",
      "title": "Add LocalBusiness Structured Data",
      "description": "As a developer, I need to create a LocalBusinessSchema component so each service-city page has schema.org structured data for local SEO.",
      "acceptanceCriteria": [
        "Run /frontend-design skill before creating component (output: design spec for schema structure)",
        "Create src/components/seo/LocalBusinessSchema.astro",
        "Accept props: serviceName (string), serviceDescription (string), cityName (string)",
        "Include schema.org JSON-LD with @type LocalBusiness",
        "Include areaServed field: {type: City, name: cityName}",
        "Include makesOffer field: {type: Offer, itemOffered: {type: Service, name: serviceName, description: serviceDescription}}",
        "Include aggregateRating field: {type: AggregateRating, ratingValue: 4.9, reviewCount: 200}",
        "Add component to service-city page template (src/pages/services/[...slug].astro)",
        "Run /web-design-guidelines review",
        "Run /agent-browser to verify schema renders in page source (view-source or browser dev tools)",
        "Test on 3 sample Guelph pages",
        "pnpm build passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "COMPLETE - LocalBusinessSchema.astro component already existed and was integrated. Verified via /frontend-design (design spec confirmed), /web-design-guidelines (PASS - no issues), /agent-browser (tested 3 Guelph pages: furnace, heat pump, AC - all render correct JSON-LD with serviceName, cityName, business data from profile.yaml). pnpm build passes (639 pages)."
    },
    {
      "id": "US-005",
      "title": "Create Utility Provider Reference Document",
      "description": "As a content writer, I need a reference document mapping all 25 cities to their utility providers so rebate information is accurate in city-specific content.",
      "acceptanceCriteria": [
        "Create docs/reference/utility-providers.md",
        "Research electricity provider for all 25 cities in src/content/locations/",
        "Research gas provider for all 25 cities",
        "Document rebate programs per provider (Enbridge Save on Energy, utility-specific programs)",
        "Create markdown table with columns: City | Electricity Provider | Gas Provider | Notes",
        "Include Guelph (Guelph Hydro, Enbridge, municipal utility note)",
        "Include Burlington (Burlington Hydro, Enbridge)",
        "Include Oakville (Oakville Hydro, Enbridge)",
        "Include Cambridge (Energy+ Inc., Enbridge, unique LDC note)",
        "Include Kitchener (Kitchener-Wilmot Hydro, Enbridge)",
        "Include Waterloo (Waterloo North Hydro, Enbridge)",
        "Complete all 25 cities from locations collection",
        "pnpm build passes (documentation only, no schema impact)"
      ],
      "priority": 5,
      "passes": false,
      "notes": "Research documentation only. NO skills required. Independent of other stories."
    },
    {
      "id": "US-006",
      "title": "Guelph Content Generation (FRESH START)",
      "description": "As a content writer, I need to generate E-E-A-T compliant content for all 22 Guelph service-city pages so they rank well with unique, city-specific content.",
      "acceptanceCriteria": [
        "Run /orchestrator skill to confirm skill sequence for content generation",
        "Run /keyword-research skill for Guelph + all 22 services (154 unique headings: 1 H1 + 6 H2s per page)",
        "Run /positioning-angles skill for Guelph-specific differentiation",
        "Validate docs/project/ralph/brand-voice.md is current and applies to Phase 8A",
        "Run /seo-content skill for problem.description, solution.description, context sections (using researched H2 keywords)",
        "Run /direct-response-copy skill for hero.title, hero.description, trustOpener, benefits, finalCta, savings.description (using researched keywords)",
        "All 22 Guelph service-city files contain Phase 8 schema fields (hero, finalCta, benefitsHeadline, contextHeadline, experienceStats)",
        "All 154 headings are UNIQUE (zero duplicates across all 22 Guelph pages)",
        "All H1s use PREMIUM positioning (NO 24/7, Emergency, Same-Day, Urgent language)",
        "H1 examples: Guelph's Trusted Furnace Installation Experts Since 1994, not 24-Hour Emergency Furnace Repair",
        "Word count ~1,000 per page verified (hero 50-100, trustOpener 50-100, problem 250-350, solution 250-350, benefits 120, context 200-400, savings 100-150, finalCta 50-75)",
        "Em dash check passes: grep -r '\\--' src/content/service-city/guelph*.md returns 0 matches",
        "Experience stats added to all pages (installationsInCity, yearsSinceCityStart)",
        "Experience stats VISIBLE in hero.description: Over [X] installations in Guelph",
        "pnpm build passes (639 pages)",
        "Run /agent-browser on 3 sample pages (furnace-installation-guelph-on, heat-pump-installation-guelph-on, air-conditioner-installation-guelph-on)"
      ],
      "priority": 6,
      "passes": false,
      "notes": "Requires /orchestrator → /keyword-research → /positioning-angles → /seo-content → /direct-response-copy → /agent-browser skills. 22 files, 154 unique headings, ~1,000 words per page. Depends on US-001 to US-005 completion."
    },
    {
      "id": "US-007",
      "title": "Burlington, Oakville, Milton Content (66 files, 462 headings)",
      "description": "As a content writer, I need to generate E-E-A-T compliant content for Burlington, Oakville, and Milton service-city pages (3 cities × 22 services = 66 files).",
      "acceptanceCriteria": [
        "Run /orchestrator skill to confirm skill sequence",
        "Run /keyword-research skill for Burlington, Oakville, Milton + all 22 services (462 unique headings)",
        "Run /positioning-angles skill for city-specific differentiation (Burlington lakefront, Oakville affluence, Milton growth)",
        "Validate brand-voice.md applies",
        "Run /seo-content skill for problem, solution, context sections",
        "Run /direct-response-copy skill for hero, trustOpener, benefits, finalCta, savings",
        "All 66 files contain Phase 8 schema fields",
        "All 462 headings are UNIQUE (zero duplicates, including checking against existing Guelph headings)",
        "All H1s use PREMIUM positioning (NO emergency language)",
        "Word count ~1,000 per page verified",
        "Em dash check passes (0 matches)",
        "Experience stats added and visible",
        "pnpm build passes",
        "Run /agent-browser on 3 sample pages (1 from each city)"
      ],
      "priority": 7,
      "passes": false,
      "notes": "Requires /orchestrator → skill chain → /agent-browser. 66 files, 462 unique headings. Depends on US-006 completion for heading uniqueness validation."
    },
    {
      "id": "US-008",
      "title": "Georgetown, Acton, Rockwood Content (66 files, 462 headings)",
      "description": "As a content writer, I need to generate E-E-A-T compliant content for Georgetown, Acton, and Rockwood service-city pages (3 cities × 22 services = 66 files).",
      "acceptanceCriteria": [
        "Run /orchestrator skill to confirm skill sequence",
        "Run /keyword-research skill for Georgetown, Acton, Rockwood + all 22 services (462 unique headings)",
        "Run /positioning-angles skill for city-specific differentiation",
        "Validate brand-voice.md applies",
        "Run /seo-content skill for problem, solution, context sections",
        "Run /direct-response-copy skill for hero, trustOpener, benefits, finalCta, savings",
        "All 66 files contain Phase 8 schema fields",
        "All 462 headings are UNIQUE (zero duplicates globally)",
        "All H1s use PREMIUM positioning (NO emergency language)",
        "Word count ~1,000 per page verified",
        "Em dash check passes (0 matches)",
        "Experience stats added and visible",
        "pnpm build passes",
        "Run /agent-browser on 3 sample pages"
      ],
      "priority": 8,
      "passes": false,
      "notes": "Requires /orchestrator → skill chain → /agent-browser. 66 files, 462 unique headings. Depends on US-007."
    },
    {
      "id": "US-009",
      "title": "Cambridge, Kitchener, Waterloo Content (66 files, 462 headings)",
      "description": "As a content writer, I need to generate E-E-A-T compliant content for Cambridge, Kitchener, and Waterloo service-city pages (3 cities × 22 services = 66 files).",
      "acceptanceCriteria": [
        "Run /orchestrator skill to confirm skill sequence",
        "Run /keyword-research skill for Cambridge, Kitchener, Waterloo + all 22 services (462 unique headings)",
        "Run /positioning-angles skill for city-specific differentiation (university cities, tech hubs)",
        "Validate brand-voice.md applies",
        "Run /seo-content skill for problem, solution, context sections",
        "Run /direct-response-copy skill for hero, trustOpener, benefits, finalCta, savings",
        "All 66 files contain Phase 8 schema fields",
        "All 462 headings are UNIQUE (zero duplicates globally)",
        "All H1s use PREMIUM positioning (NO emergency language)",
        "Word count ~1,000 per page verified",
        "Em dash check passes (0 matches)",
        "Experience stats added and visible",
        "pnpm build passes",
        "Run /agent-browser on 3 sample pages"
      ],
      "priority": 9,
      "passes": false,
      "notes": "Requires /orchestrator → skill chain → /agent-browser. 66 files, 462 unique headings. Depends on US-008."
    },
    {
      "id": "US-010",
      "title": "Elmira, St. Jacobs, New Hamburg Content (66 files, 462 headings)",
      "description": "As a content writer, I need to generate E-E-A-T compliant content for Elmira, St. Jacobs, and New Hamburg service-city pages (3 cities × 22 services = 66 files).",
      "acceptanceCriteria": [
        "Run /orchestrator skill to confirm skill sequence",
        "Run /keyword-research skill for Elmira, St. Jacobs, New Hamburg + all 22 services (462 unique headings)",
        "Run /positioning-angles skill for city-specific differentiation (rural communities, Mennonite heritage)",
        "Validate brand-voice.md applies",
        "Run /seo-content skill for problem, solution, context sections",
        "Run /direct-response-copy skill for hero, trustOpener, benefits, finalCta, savings",
        "All 66 files contain Phase 8 schema fields",
        "All 462 headings are UNIQUE (zero duplicates globally)",
        "All H1s use PREMIUM positioning (NO emergency language)",
        "Word count ~1,000 per page verified",
        "Em dash check passes (0 matches)",
        "Experience stats added and visible",
        "pnpm build passes",
        "Run /agent-browser on 3 sample pages"
      ],
      "priority": 10,
      "passes": false,
      "notes": "Requires /orchestrator → skill chain → /agent-browser. 66 files, 462 unique headings. Depends on US-009."
    },
    {
      "id": "US-011",
      "title": "Fergus, Elora, Arthur Content (66 files, 462 headings)",
      "description": "As a content writer, I need to generate E-E-A-T compliant content for Fergus, Elora, and Arthur service-city pages (3 cities × 22 services = 66 files).",
      "acceptanceCriteria": [
        "Run /orchestrator skill to confirm skill sequence",
        "Run /keyword-research skill for Fergus, Elora, Arthur + all 22 services (462 unique headings)",
        "Run /positioning-angles skill for city-specific differentiation (historic towns, Elora Gorge area)",
        "Validate brand-voice.md applies",
        "Run /seo-content skill for problem, solution, context sections",
        "Run /direct-response-copy skill for hero, trustOpener, benefits, finalCta, savings",
        "All 66 files contain Phase 8 schema fields",
        "All 462 headings are UNIQUE (zero duplicates globally)",
        "All H1s use PREMIUM positioning (NO emergency language)",
        "Word count ~1,000 per page verified",
        "Em dash check passes (0 matches)",
        "Experience stats added and visible",
        "pnpm build passes",
        "Run /agent-browser on 3 sample pages"
      ],
      "priority": 11,
      "passes": false,
      "notes": "Requires /orchestrator → skill chain → /agent-browser. 66 files, 462 unique headings. Depends on US-010."
    },
    {
      "id": "US-012",
      "title": "Mount Forest, Orangeville, Shelburne Content (66 files, 462 headings)",
      "description": "As a content writer, I need to generate E-E-A-T compliant content for Mount Forest, Orangeville, and Shelburne service-city pages (3 cities × 22 services = 66 files).",
      "acceptanceCriteria": [
        "Run /orchestrator skill to confirm skill sequence",
        "Run /keyword-research skill for Mount Forest, Orangeville, Shelburne + all 22 services (462 unique headings)",
        "Run /positioning-angles skill for city-specific differentiation",
        "Validate brand-voice.md applies",
        "Run /seo-content skill for problem, solution, context sections",
        "Run /direct-response-copy skill for hero, trustOpener, benefits, finalCta, savings",
        "All 66 files contain Phase 8 schema fields",
        "All 462 headings are UNIQUE (zero duplicates globally)",
        "All H1s use PREMIUM positioning (NO emergency language)",
        "Word count ~1,000 per page verified",
        "Em dash check passes (0 matches)",
        "Experience stats added and visible",
        "pnpm build passes",
        "Run /agent-browser on 3 sample pages"
      ],
      "priority": 12,
      "passes": false,
      "notes": "Requires /orchestrator → skill chain → /agent-browser. 66 files, 462 unique headings. Depends on US-011."
    },
    {
      "id": "US-013",
      "title": "Erin, Hillsburgh, Harriston Content (66 files, 462 headings)",
      "description": "As a content writer, I need to generate E-E-A-T compliant content for Erin, Hillsburgh, and Harriston service-city pages (3 cities × 22 services = 66 files).",
      "acceptanceCriteria": [
        "Run /orchestrator skill to confirm skill sequence",
        "Run /keyword-research skill for Erin, Hillsburgh, Harriston + all 22 services (462 unique headings)",
        "Run /positioning-angles skill for city-specific differentiation",
        "Validate brand-voice.md applies",
        "Run /seo-content skill for problem, solution, context sections",
        "Run /direct-response-copy skill for hero, trustOpener, benefits, finalCta, savings",
        "All 66 files contain Phase 8 schema fields",
        "All 462 headings are UNIQUE (zero duplicates globally)",
        "All H1s use PREMIUM positioning (NO emergency language)",
        "Word count ~1,000 per page verified",
        "Em dash check passes (0 matches)",
        "Experience stats added and visible",
        "pnpm build passes",
        "Run /agent-browser on 3 sample pages"
      ],
      "priority": 13,
      "passes": false,
      "notes": "Requires /orchestrator → skill chain → /agent-browser. 66 files, 462 unique headings. Depends on US-012."
    },
    {
      "id": "US-014",
      "title": "Palmerston, Listowel, Drayton Content (66 files, 462 headings)",
      "description": "As a content writer, I need to generate E-E-A-T compliant content for Palmerston, Listowel, and Drayton service-city pages (3 cities × 22 services = 66 files).",
      "acceptanceCriteria": [
        "Run /orchestrator skill to confirm skill sequence",
        "Run /keyword-research skill for Palmerston, Listowel, Drayton + all 22 services (462 unique headings)",
        "Run /positioning-angles skill for city-specific differentiation",
        "Validate brand-voice.md applies",
        "Run /seo-content skill for problem, solution, context sections",
        "Run /direct-response-copy skill for hero, trustOpener, benefits, finalCta, savings",
        "All 66 files contain Phase 8 schema fields",
        "All 462 headings are UNIQUE (zero duplicates globally)",
        "All H1s use PREMIUM positioning (NO emergency language)",
        "Word count ~1,000 per page verified",
        "Em dash check passes (0 matches)",
        "Experience stats added and visible",
        "pnpm build passes",
        "Run /agent-browser on 3 sample pages"
      ],
      "priority": 14,
      "passes": false,
      "notes": "Requires /orchestrator → skill chain → /agent-browser. 66 files, 462 unique headings. Final content generation story. Depends on US-013."
    },
    {
      "id": "US-015",
      "title": "Automated Verification & Cleanup Scripts",
      "description": "As a developer, I need automated scripts to verify heading uniqueness, word counts, and content quality across all 550 service-city pages so quality gates are enforced.",
      "acceptanceCriteria": [
        "Create scripts/phase8/check-h1-uniqueness.ts: Extract all H1s from hero.title fields, detect duplicates, output report",
        "Create scripts/phase8/check-h2-uniqueness.ts: Extract all H2s (problem.headline, solution.headline, benefitsHeadline, contextHeadline, savings.headline, finalCta.headline), detect duplicates, output report",
        "Create scripts/phase8/check-heading-keywords.ts: Verify all headings contain service name OR city name, output compliance %",
        "Create scripts/phase8/check-word-count.ts: Count words per page (all text fields combined), flag pages <900 words, output report",
        "Create scripts/phase8/check-em-dashes.ts: Search all service-city files for em dashes (--), output matches",
        "Add package.json scripts: check:h1-uniqueness: tsx scripts/phase8/check-h1-uniqueness.ts",
        "Add package.json scripts: check:h2-uniqueness: tsx scripts/phase8/check-h2-uniqueness.ts",
        "Add package.json scripts: check:heading-keywords: tsx scripts/phase8/check-heading-keywords.ts",
        "Add package.json scripts: check:word-count: tsx scripts/phase8/check-word-count.ts",
        "Add package.json scripts: check:em-dashes: tsx scripts/phase8/check-em-dashes.ts",
        "Run all 5 scripts and verify 100% compliance (0 H1 duplicates, 0 H2 duplicates, 100% keyword compliance, all pages ~1,000 words, 0 em dashes)",
        "pnpm build passes"
      ],
      "priority": 15,
      "passes": false,
      "notes": "Script development only. NO skills required. Depends on US-006 to US-014 completion. Creates 5 verification scripts for quality gates."
    },
    {
      "id": "US-016",
      "title": "Experience Stats Population",
      "description": "As a content writer, I need realistic installation count data added to all 550 service-city pages so experience signals are visible and credible.",
      "acceptanceCriteria": [
        "Run /orchestrator skill to confirm data strategy for installation counts",
        "Calculate realistic installation counts per city based on 30+ years in business (since 1994)",
        "Distribute counts proportionally across services (furnace highest, boiler lowest)",
        "Add experienceStats object to all 550 service-city files",
        "Verify stats visible in hero.description: Over [X] [service] installations in [City]",
        "Verify stats visible in context section: [X]+ years serving [City] homeowners",
        "Stats must be realistic (Guelph higher counts, smaller towns lower counts)",
        "pnpm build passes"
      ],
      "priority": 16,
      "passes": false,
      "notes": "Requires /orchestrator skill. Adds realistic experience stats to all 550 pages. Depends on US-006 to US-014."
    },
    {
      "id": "US-017",
      "title": "Internal Linking Audit",
      "description": "As a QA tester, I need to verify all internal links work correctly across service-city pages so users can navigate between related content.",
      "acceptanceCriteria": [
        "Run /agent-browser to test internal links on 5 sample cities (Guelph, Burlington, Cambridge, Fergus, Orangeville)",
        "Verify parent service links work: furnace-installation-guelph-on → /services/furnace-installation",
        "Verify location hub links work: furnace-installation-guelph-on → /locations/guelph",
        "Verify LocationServicesGrid shows correct cross-links (only services in that city)",
        "Test on 5 cities × 3 services = 15 pages total",
        "All links resolve correctly (no 404s, no broken anchors)",
        "pnpm build passes"
      ],
      "priority": 17,
      "passes": false,
      "notes": "Requires /agent-browser skill. Final verification step. Depends on US-002 (component updates with internal links) and US-003 (LocationServicesGrid bug fix)."
    }
  ]
}
