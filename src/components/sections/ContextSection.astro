---
interface Props {
  cityName: string;
  serviceName?: string;
  content: string;
  contextHeadline?: string;  // Phase 8A: City-specific headline (overrides dynamic headline)
  variant?: 'default' | 'muted' | 'primary';
}

const { cityName, serviceName, content, contextHeadline, variant = 'muted' } = Astro.props;

// Variant background classes
const variantClasses = {
  default: 'bg-background',
  muted: 'bg-muted/30',
  primary: 'bg-primary/5'
};

// Handle empty content gracefully
if (!content || content.trim() === '') {
  return null;
}

// City-specific headline takes priority
const displayHeadline = contextHeadline ||
  (serviceName
    ? `${serviceName} in ${cityName}`
    : `Local Context for ${cityName}`);
---

<section class={`py-16 md:py-24 ${variantClasses[variant]}`}>
  <div class="container mx-auto px-4 md:px-6">
    <div class="max-w-4xl mx-auto">
      <h2 class="text-3xl md:text-4xl font-bold mb-8 text-center">
        {displayHeadline}
      </h2>

      <div
        class="prose prose-neutral dark:prose-invert max-w-none prose-lg"
        set:html={content}
      />
    </div>
  </div>
</section>
