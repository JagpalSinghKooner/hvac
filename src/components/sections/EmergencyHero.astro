---
import Section from '@/components/layout/Section.astro';
import Container from '@/components/layout/Container.astro';
import PhoneCTA from '@/components/cta/PhoneCTA.astro';
import BookingCTA from '@/components/cta/BookingCTA.astro';
import TrustBadges from '@/components/TrustBadges.astro';
import { Phone } from 'lucide-react';
import { getEntry } from 'astro:content';

interface Props {
  heading: string;
  subheading: string;
}

const { heading, subheading } = Astro.props;

const businessProfile = await getEntry('business', 'profile');
if (!businessProfile) {
  throw new Error('Business profile not found');
}
const business = businessProfile.data;
---

<Section padding="lg" class="bg-gradient-to-b from-destructive/10 via-destructive/5 to-background relative overflow-hidden">
  <!-- Emergency accent border -->
  <div class="absolute top-0 left-0 right-0 h-1 bg-destructive" aria-hidden="true"></div>

  <Container size="narrow" class="text-center">
    <!-- Emergency indicator badge -->
    <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-destructive text-destructive-foreground mb-6 animate-pulse">
      <Phone className="h-4 w-4" aria-hidden="true" />
      <span class="text-sm font-semibold">24/7 EMERGENCY SERVICE</span>
    </div>

    <!-- Hero Heading -->
    <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight mb-6">
      {heading}
    </h1>

    <!-- Subheading -->
    <p class="text-lg md:text-xl text-muted-foreground max-w-2xl mx-auto mb-4">
      {subheading}
    </p>

    <!-- Response time callout -->
    <div class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-secondary/20 text-foreground mb-8">
      <span class="text-base font-medium">
        âš¡ Typically within {business.hours.target_response_time_minutes} minutes across our service area
      </span>
    </div>

    <!-- CTA Buttons -->
    <div class="flex flex-col sm:flex-row gap-4 justify-center mb-8">
      <PhoneCTA variant="hero" showBadge={true} class="text-lg h-14 px-10" />
      <BookingCTA variant="hero" class="h-14 px-10" />
    </div>

    <!-- Trust Badges -->
    <TrustBadges />
  </Container>
</Section>
