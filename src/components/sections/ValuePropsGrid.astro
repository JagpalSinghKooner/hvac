---
import { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';
import Section from '@/components/layout/Section.astro';
import Container from '@/components/layout/Container.astro';
import * as Icons from 'lucide-react';

interface Props {
  valueProps: Array<{
    title: string;
    description: string;
    icon?: string;
  }>;
  heading?: string;
}

const { valueProps, heading = 'Why Choose Us' } = Astro.props;

// Pre-process valueProps to get icon components in frontmatter
const propsWithIcons = valueProps.map(prop => ({
  ...prop,
  IconComponent: prop.icon ? (Icons as any)[prop.icon] || Icons.CheckCircle : Icons.CheckCircle
}));
---

<Section padding="lg">
  <Container>
    <h2 class="font-heading text-h2 text-center mb-12">{heading}</h2>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
      {propsWithIcons.map(prop => (
        <Card className="text-center h-full flex flex-col group transition-all duration-300 hover:shadow-card-hover hover:-translate-y-1 value-prop-card">
          <CardHeader>
            {/* Gradient icon circle (brand gradient) */}
            <div class="relative w-12 h-12 rounded-full p-0.5 gradient-brand mx-auto mb-4 transition-transform duration-300 group-hover:scale-110">
              <div class="w-full h-full bg-white rounded-full flex items-center justify-center">
                <prop.IconComponent className="h-6 w-6 text-primary transition-transform duration-300 group-hover:rotate-6" aria-hidden="true" />
              </div>
            </div>
            <CardTitle className="text-lg font-heading">{prop.title}</CardTitle>
          </CardHeader>
          <CardContent className="flex-1">
            <p class="text-sm text-gray-600">{prop.description}</p>
          </CardContent>
        </Card>
      ))}
    </div>
  </Container>
</Section>

<style>
  .value-prop-card {
    animation: fadeInUp 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  .value-prop-card:nth-child(1) { animation-delay: 0ms; }
  .value-prop-card:nth-child(2) { animation-delay: 100ms; }
  .value-prop-card:nth-child(3) { animation-delay: 200ms; }
  .value-prop-card:nth-child(4) { animation-delay: 300ms; }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .value-prop-card {
      animation: none;
      opacity: 1;
    }
  }
</style>
