---
import { Card, CardHeader, CardTitle, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import Section from '@/components/layout/Section.astro';
import Container from '@/components/layout/Container.astro';
import { getEntry } from 'astro:content';

const businessProfile = await getEntry('business', 'profile');
if (!businessProfile) {
  throw new Error('Business profile not found');
}
const business = businessProfile.data;
const regions = business.coverage.regions;
---

<Section padding="lg">
  <Container>
    <h2 class="text-3xl font-semibold text-center mb-12">
      Service Areas Across Southern Ontario
    </h2>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {regions.map((region: any) => (
        <Card>
          <CardHeader>
            <CardTitle className="text-lg">{region.name}</CardTitle>
          </CardHeader>
          <CardContent>
            <ul class="space-y-1">
              {region.locations.map((location: any) => (
                <li>
                  <Button variant="link" asChild className="p-0 h-auto text-sm">
                    <a href={`/locations/${location.slug}/`}>
                      {location.name}
                    </a>
                  </Button>
                </li>
              ))}
            </ul>
          </CardContent>
        </Card>
      ))}
    </div>
  </Container>
</Section>
