---
import { cn } from '@/lib/utils';

type Props = {
  as?: 'section' | 'div' | 'main' | 'header' | 'footer';
  padding?: 'none' | 'sm' | 'md' | 'lg';
  background?: 'none' | 'white' | 'muted' | 'primary-light' | 'gradient-cool' | 'gradient-warm';
  fullWidth?: boolean; // Enable negative margin breakout
  class?: string;
  [key: string]: any; // Allow additional HTML attributes
}

const {
  as: Tag = 'section',
  padding = 'md',
  background = 'none',
  fullWidth = false,
  class: className,
  ...rest
} = Astro.props as Props;

const paddingClasses: Record<NonNullable<Props['padding']>, string> = {
  none: 'py-0',
  sm: 'py-8 sm:py-10',
  md: 'py-12 sm:py-16',
  lg: 'py-16 sm:py-24',
};

const backgroundClasses: Record<NonNullable<Props['background']>, string> = {
  none: '',
  white: 'bg-white',
  muted: 'bg-gray-50',
  'primary-light': 'bg-primary-50/30',
  'gradient-cool': 'gradient-mesh-cool',
  'gradient-warm': 'gradient-mesh-warm',
};

// Full-width breakout for colored sections
const breakoutClasses = fullWidth
  ? '-mx-4 px-4 md:-mx-6 md:px-6 lg:-mx-8 lg:px-8 rounded-xl'
  : '';
---

<Tag class={cn(paddingClasses[padding], backgroundClasses[background], breakoutClasses, className)} {...rest}>
  <slot />
</Tag>
